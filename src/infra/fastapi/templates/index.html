<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tower of Babel Video</title>
    <!-- Material Components Web CSS -->
    <link
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts for Material Icons -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <!-- Google Fonts for Roboto (used by MDC) -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />

    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <!-- Material Components Web JavaScript -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script>
      // Initialize Material Design components after the DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        mdc.autoInit();
        // Optional: specifically initialize text fields and buttons for ripple effect
        const textFields = document.querySelectorAll(".mdc-text-field");
        textFields.forEach((tf) => mdc.textField.MDCTextField.attachTo(tf));
        const buttons = document.querySelectorAll(".mdc-button");
        buttons.forEach((btn) => mdc.ripple.MDCRipple.attachTo(btn));
      });
    </script>

    <!-- Top App Bar -->
    <header class="mdc-top-app-bar mdc-top-app-bar--fixed">
      <div class="mdc-top-app-bar__row">
        <section
          class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start"
        >
          <span class="mdc-top-app-bar__title">Tower of Babel Video</span>
        </section>
        <section
          class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end"
          role="toolbar"
        >
          <!-- Optional: Add menu or other actions here -->
        </section>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="mdc-top-app-bar--fixed-adjust">
      <div class="app-layout">
        <!-- Sidebar for Latest Videos -->
        <div class="sidebar">
          <div
            class="mdc-card"
            style="flex-grow: 1; display: flex; flex-direction: column"
          >
            <div class="mdc-card__primary-action" style="flex-grow: 1">
              <h2 class="mdc-typography--headline6">Latest Uploaded Videos</h2>
              <div style="max-height: 250px; overflow-y: auto">
                <!-- Scrollable area for video list -->
                <table class="video-list-table">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>URL</th>
                      <th>Uploaded</th>
                    </tr>
                  </thead>
                  <tbody id="video-list-tbody">
                    <!-- Video rows will be inserted here by JavaScript -->
                    <tr>
                      <td colspan="3" style="text-align: center">
                        Loading videos...
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="mdc-card__actions pagination-controls">
              <button
                class="mdc-button mdc-button--outlined"
                id="prev-page-button"
                disabled
              >
                <span class="mdc-button__ripple"></span>
                <i class="material-icons mdc-button__icon" aria-hidden="true"
                  >arrow_back_ios</i
                >
                <span class="mdc-button__label">Prev</span>
              </button>
              <span id="page-info" class="mdc-typography--body2"
                >Page 1 of 1</span
              >
              <button
                class="mdc-button mdc-button--outlined"
                id="next-page-button"
                disabled
              >
                <span class="mdc-button__ripple"></span>
                <i class="material-icons mdc-button__icon" aria-hidden="true"
                  >arrow_forward_ios</i
                >
                <span class="mdc-button__label">Next</span>
              </button>
            </div>
          </div>

          <!-- New: Translations List Card -->
          <div class="mdc-card" style="flex-grow: 1; display: flex; flex-direction: column; margin-top: 20px;">
            <div class="mdc-card__primary-action" style="flex-grow: 1;">
              <h2 class="mdc-typography--headline6">Video Translations</h2>
              <div style="max-height: 250px; overflow-y: auto;">
                <table class="video-list-table"> <!-- Re-using class for similar styling -->
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>From/To</th>
                      <th>Time</th>
                    </tr>
                  </thead>
                  <tbody id="translation-list-tbody">
                    <tr><td colspan="3" style="text-align: center;">No translations for this video.</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Content (right side) -->
        <div class="main-content">
          <!-- Loading Bar -->
          <div
            role="progressbar"
            class="mdc-linear-progress mdc-linear-progress--indeterminate"
            id="loading-bar"
            style="display: none"
          >
            <div class="mdc-linear-progress__buffer">
              <div class="mdc-linear-progress__buffer-bar"></div>
            </div>
            <div
              class="mdc-linear-progress__bar mdc-linear-progress__primary-bar"
            >
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
            <div
              class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar"
            >
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
          </div>

          <!-- Video URL Input Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">Upload & Process Video</h2>
              <div class="video-input-group">
                <div
                  class="mdc-text-field mdc-text-field--outlined"
                  style="flex-grow: 1"
                >
                  <input
                    type="text"
                    id="video-url"
                    class="mdc-text-field__input"
                    aria-labelledby="video-url-label"
                  />
                  <div class="mdc-notched-outline">
                    <div class="mdc-notched-outline__leading"></div>
                    <div class="mdc-notched-outline__notch">
                      <label
                        for="video-url"
                        class="mdc-floating-label"
                        id="video-url-label"
                        >Paste Video URL (MP4 only)</label
                      >
                    </div>
                    <div class="mdc-notched-outline__trailing"></div>
                  </div>
                </div>
                <button
                  class="mdc-button mdc-button--raised mdc-button--leading-icon"
                  id="process-video"
                >
                  <span class="mdc-button__ripple"></span>
                  <i class="material-icons mdc-button__icon" aria-hidden="true"
                    >play_circle_filled</i
                  >
                  <span class="mdc-button__label">Process Video</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Video Player Card (New) -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">Loaded Video</h2>
              <div
                id="video-player-display"
                style="
                  text-align: center;
                  min-height: 200px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  background-color: #f0f0f0;
                  border-radius: 4px;
                "
              >
                <video
                  id="video-player"
                  controls
                  autoplay
                  style="
                    width: 100%;
                    max-height: 400px;
                    display: none;
                    border-radius: 4px;
                  "
                ></video>
                <p
                  id="no-video-message"
                  class="mdc-typography--body1"
                  style="color: #757575"
                >
                  No video loaded. Upload one!
                </p>
              </div>
            </div>
          </div>

          <!-- Video Details Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">Video Information</h2>
              <div class="mdc-typography--body1">
                <p>
                  <strong>Video ID:</strong>
                  <span id="video-id">N/A</span>
                </p>
                <p>
                  <strong>Original URL:</strong>
                  <a
                    id="original-url"
                    href="#"
                    target="_blank"
                    rel="noopener noreferrer"
                    >N/A</a
                  >
                </p>
                <p>
                  <strong>Video Type:</strong>
                  <span id="video-type">N/A</span>
                </p>
                <p>
                  <strong>Uploaded At:</strong>
                  <span id="uploaded-at">N/A</span>
                </p>
                <p>
                  <strong>Duration:</strong>
                  <span id="duration">N/A</span> seconds
                </p>
                <p>
                  <strong>Dimensions:</strong>
                  <span id="width">N/A</span> x
                  <span id="height">N/A</span> pixels
                </p>
              </div>
            </div>
          </div>

          <!-- Audio Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">Audio Extraction</h2>
              <div class="mdc-typography--body1">
                <p>
                  Play a specific audio segment or download the full extracted
                  audio track.
                </p>
                <div
                  style="
                    display: flex;
                    align-items: flex-end;
                    gap: 10px;
                    margin-top: 15px;
                    flex-wrap: wrap;
                  "
                >
                  <div
                    class="mdc-text-field mdc-text-field--outlined mdc-text-field--disabled"
                    style="width: 50%"
                  >
                    <input
                      type="text"
                      id="audio-segment-video-id"
                      class="mdc-text-field__input"
                      aria-labelledby="audio-video-id-label"
                      disabled
                    />
                    <div class="mdc-notched-outline">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                        <label
                          for="audio-segment-video-id"
                          class="mdc-floating-label"
                          id="audio-video-id-label"
                          >Video ID</label
                        >
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                    </div>
                  </div>
                  <div
                    class="mdc-text-field mdc-text-field--outlined"
                    style="width: 11%"
                  >
                    <input
                      type="number"
                      id="from-seconds"
                      class="mdc-text-field__input"
                      aria-labelledby="from-seconds-label"
                      value="30"
                    />
                    <div class="mdc-notched-outline">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                        <label
                          for="from-seconds"
                          class="mdc-floating-label"
                          id="from-seconds-label"
                          >Start (s)</label
                        >
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                    </div>
                  </div>
                  <div
                    class="mdc-text-field mdc-text-field--outlined"
                    style="width: 11%"
                  >
                    <input
                      type="number"
                      id="to-seconds"
                      class="mdc-text-field__input"
                      aria-labelledby="to-seconds-label"
                      value="45"
                    />
                    <div class="mdc-notched-outline">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                        <label
                          for="to-seconds"
                          class="mdc-floating-label"
                          id="to-seconds-label"
                          >End (s)</label
                        >
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mdc-card__actions">
              <div class="mdc-card__action-buttons">
                <button
                  class="mdc-button mdc-button--outlined mdc-button--leading-icon"
                  id="play-audio"
                  disabled
                >
                  <span class="mdc-button__ripple"></span>
                  <i class="material-icons mdc-button__icon" aria-hidden="true"
                    >volume_up</i
                  >
                  <span class="mdc-button__label">Play Audio Segment</span>
                </button>
                <button
                  class="mdc-button mdc-button--outlined mdc-button--leading-icon"
                  id="download-audio"
                  disabled
                >
                  <span class="mdc-button__ripple"></span>
                  <i class="material-icons mdc-button__icon" aria-hidden="true"
                    >file_download</i
                  >
                  <span class="mdc-button__label">Download Audio Segment</span>
                </button>
                 <button
                  class="mdc-button mdc-button--raised mdc-button--leading-icon"
                  id="translate-audio-button"
                  disabled
                >
                  <span class="mdc-button__ripple"></span>
                  <i class="material-icons mdc-button__icon" aria-hidden="true">translate</i>
                  <span class="mdc-button__label">Translate Segment</span>
                </button>
              </div>
            </div>
          </div>

          <!-- Translation Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">
                Detected Text Translation
              </h2>
              <p id="translation" class="mdc-typography--body1">N/A</p>
            </div>
            <div class="mdc-card__actions">
              <div class="mdc-card__action-buttons">
                <button
                  class="mdc-button mdc-button--raised mdc-button--leading-icon"
                  id="speak-translation"
                  disabled
                >
                  <span class="mdc-button__ripple"></span>
                  <i
                    class="material-icons mdc-button__icon"
                    aria-hidden="true"
                    >record_voice_over</i
                  >
                  <span class="mdc-button__label">Speak Translation</span>
                </button>
              </div>
            </div>
          </div>

          <!-- First Frame Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">First Frame Screenshot</h2>
              <img
                id="first-frame"
                src=""
                alt="First frame of the video"
                style="
                  width: 100%;
                  height: auto;
                  max-height: 400px;
                  object-fit: contain;
                  border-radius: 4px;
                  margin-top: 15px;
                  border: 1px solid #e0e0e0;
                  display: none;
                "
              />
            </div>
            <div class="mdc-card__actions">
              <div class="mdc-card__action-buttons">
                <button
                  class="mdc-button mdc-button--outlined mdc-button--leading-icon"
                  id="download-frame"
                  disabled
                >
                  <span class="mdc-button__ripple"></span>
                  <i class="material-icons mdc-button__icon" aria-hidden="true"
                    >wallpaper</i
                  >
                  <span class="mdc-button__label">Download Frame</span>
                </button>
              </div>
            </div>
          </div>

          <!-- OCR Detected Text Card -->
          <div class="mdc-card">
            <div class="mdc-card__primary-action">
              <h2 class="mdc-typography--headline6">OCR Detected Text</h2>
              <div id="ocr-output" class="mdc-typography--body2">
                No text detected yet.
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="/static/script.js"></script>

    <!-- Translation Modal (Hidden by default) -->
    <div id="translation-modal" class="mdc-dialog" role="alertdialog" aria-modal="true" aria-labelledby="translation-dialog-title" aria-describedby="translation-dialog-content">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface">
          <h2 class="mdc-dialog__title" id="translation-dialog-title">Translation Details</h2>
          <div class="mdc-dialog__content" id="translation-dialog-content">
            <p><strong>Original Text:</strong></p>
            <p id="modal-original-text" class="mdc-typography--body1"></p>
            <p><strong>Translated Text (Spanish):</strong></p>
            <p id="modal-translated-text" class="mdc-typography--body1"></p>
            <p class="mdc-typography--body2"><em>Segment: <span id="modal-segment-time"></span></em></p>
          </div>
          <div class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
              <span class="mdc-button__label">Close</span>
            </button>
          </div>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>
  </body>
</html>